/*
 *  OAC Video Annotation Tool
 * 
 *  Developed as a plugin for the MITHGrid framework. 
 *  
 *  Date: Wed Sep 28 10:18:53 2011 -0400
 *  
 * Educational Community License, Version 2.0
 * 
 * Copyright 2011 University of Maryland. Licensed under the Educational
 * Community License, Version 2.0 (the "License"); you may not use this file
 * except in compliance with the License. You may obtain a copy of the License at
 * 
 * http://www.osedu.org/licenses/ECL-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 * 
 */
var MITHGrid=MITHGrid||{},jQuery=jQuery||{},fluid=fluid||{},Raphael=Raphael||{};(function(a,b){b.Presentation.RaphSVG=function(a,c){var d=b.Presentation.initPresentation("RaphSVG",a,c);return d},b.Presentation.SVGRect=function(a,c){var d=b.Presentation.initPresentation("SVGRect",a,c);return d}})(jQuery,MITHGrid),function(a,b){b.Application.namespace("Canvas"),b.Application.Canvas.initApp=function(c,d){var e={},f=b.Application.initApp("MITHGrid.Application.Canvas",c,a.extend(!0,{},d,{dataViews:{drawspace:{dataStore:"canvas",types:["paper"],label:"drawspace"},shapes:{dataStore:"canvas",types:["shape"],label:"shapes",filters:[".posInfo"]}},viewSetup:'<div id="canvasSVG"></div><div id="testdone"></div><button id="loadrect">Load SVG Shape</button>',presentations:{raphsvg:{type:b.Presentation.RaphSVG,container:"#canvasSVG",dataView:"drawspace",lenses:{paper:function(b,c,d,f){var g={},h,i,j=a(b).attr("id"),k=d.getItem(f);console.log("svg  "+j),h=Raphael(j,k.sizew,k.sizeh),e=h,a("#testdone").text("SVG loaded "+JSON.stringify(e))}}},svgshape:{type:b.Presentation.SVGRect,container:"#canvasSVG",dataView:"shapes",lenses:{shape:function(b,c,d,f){var g={},h,i=d.getItem(f);a("#testdone").append("<p>Rect object: "+JSON.stringify(i)+"</p>");switch(i.shapeType[0]){case"rect":e.rect(i.posInfo[0].x,i.posInfo[0].y,i.posInfo[0].w,i.posInfo[0].h)}}}}}}));f.ready(function(){f.dataStore.canvas.loadItems([{id:"raphcanvas",type:"paper",label:"RaphaelJS Canvas",sizew:500,sizeh:500}]),a("#loadrect").click(function(a){a.preventDefault(),f.dataStore.canvas.loadItems([{id:"rect1",type:"shape",shapeType:"rect",posInfo:{w:10,h:10,x:110,y:23}}])})});return f},fluid.defaults("MITHGrid.Application.Canvas",{dataStores:{canvas:{types:{paper:{},shape:{}},properties:{posInfo:{type:"Item"}}}}})}(jQuery,MITHGrid);